version: 3

vars:
  VENDOR_DIR: "{{ .TASK_DIR }}/vendor"
  # Include the local agpublic/jsonnet directory so that local
  # changes to dependencies in this repo are used.
  LOCAL_DEP_DIR: "{{ .TASKFILE_DIR }}"

tasks:
  # Run like:
  #   task core:test -- manifest_test.jsonnet
  test:
    cmds:
      - "jsonnet -t 200 -J {{ .TASK_DIR }} -J {{ .LOCAL_DEP_DIR }} -J {{ .VENDOR_DIR }} {{ .CLI_ARGS }}"
